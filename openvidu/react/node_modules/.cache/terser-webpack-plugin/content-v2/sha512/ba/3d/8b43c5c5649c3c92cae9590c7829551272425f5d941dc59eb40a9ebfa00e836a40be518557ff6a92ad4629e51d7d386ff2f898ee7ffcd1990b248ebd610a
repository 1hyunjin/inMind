{"code":"(this[\"webpackJsonpopenvidu-react\"]=this[\"webpackJsonpopenvidu-react\"]||[]).push([[0],{111:function(e,s,t){},113:function(e,s,t){},114:function(e,s,t){\"use strict\";t.r(s);var i=t(4),n=t.n(i),a=t(53),o=t.n(a),r=(t(59),t(54)),c=t(23),d=t.n(c),h=(t(111),t(0));class l extends i.Component{constructor(e){super(e),this.videoRef=n.a.createRef()}componentDidUpdate(e){e&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}componentDidMount(){this.props&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}render(){return Object(h.jsx)(\"video\",{autoPlay:!0,ref:this.videoRef})}}t(113);class m extends i.Component{getNicknameTag(){return JSON.parse(this.props.streamManager.stream.connection.data).clientData}render(){return Object(h.jsx)(\"div\",{children:void 0!==this.props.streamManager?Object(h.jsxs)(\"div\",{className:\"streamcomponent\",children:[Object(h.jsx)(l,{streamManager:this.props.streamManager}),Object(h.jsx)(\"div\",{children:Object(h.jsx)(\"p\",{children:this.getNicknameTag()})})]}):null})}}class u extends i.Component{constructor(e){super(e),this.state={mySessionId:\"SessionA\",myUserName:\"Participant\"+Math.floor(100*Math.random()),session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[]},this.joinSession=this.joinSession.bind(this),this.leaveSession=this.leaveSession.bind(this),this.switchCamera=this.switchCamera.bind(this),this.handleChangeSessionId=this.handleChangeSessionId.bind(this),this.handleChangeUserName=this.handleChangeUserName.bind(this),this.handleMainVideoStream=this.handleMainVideoStream.bind(this),this.onbeforeunload=this.onbeforeunload.bind(this)}componentDidMount(){window.addEventListener(\"beforeunload\",this.onbeforeunload)}componentWillUnmount(){window.removeEventListener(\"beforeunload\",this.onbeforeunload)}onbeforeunload(e){this.leaveSession()}handleChangeSessionId(e){this.setState({mySessionId:e.target.value})}handleChangeUserName(e){this.setState({myUserName:e.target.value})}handleMainVideoStream(e){this.state.mainStreamManager!==e&&this.setState({mainStreamManager:e})}deleteSubscriber(e){let s=this.state.subscribers,t=s.indexOf(e,0);t>-1&&(s.splice(t,1),this.setState({subscribers:s}))}joinSession(){this.OV=new r.OpenVidu,this.setState({session:this.OV.initSession()},(()=>{var e=this.state.session;e.on(\"streamCreated\",(s=>{var t=e.subscribe(s.stream,void 0),i=this.state.subscribers;i.push(t),this.setState({subscribers:i})})),e.on(\"streamDestroyed\",(e=>{this.deleteSubscriber(e.stream.streamManager)})),e.on(\"exception\",(e=>{console.warn(e)})),this.getToken().then((s=>{e.connect(s,{clientData:this.state.myUserName}).then((async()=>{let s=await this.OV.initPublisherAsync(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:\"640x480\",frameRate:30,insertMode:\"APPEND\",mirror:!1});e.publish(s);var t=(await this.OV.getDevices()).filter((e=>\"videoinput\"===e.kind)),i=s.stream.getMediaStream().getVideoTracks()[0].getSettings().deviceId,n=t.find((e=>e.deviceId===i));this.setState({currentVideoDevice:n,mainStreamManager:s,publisher:s})})).catch((e=>{console.log(\"There was an error connecting to the session:\",e.code,e.message)}))}))}))}leaveSession(){const e=this.state.session;e&&e.disconnect(),this.OV=null,this.setState({session:void 0,subscribers:[],mySessionId:\"SessionA\",myUserName:\"Participant\"+Math.floor(100*Math.random()),mainStreamManager:void 0,publisher:void 0})}async switchCamera(){try{var e=(await this.OV.getDevices()).filter((e=>\"videoinput\"===e.kind));if(e&&e.length>1){var s=e.filter((e=>e.deviceId!==this.state.currentVideoDevice.deviceId));if(s.length>0){var t=this.OV.initPublisher(void 0,{videoSource:s[0].deviceId,publishAudio:!0,publishVideo:!0,mirror:!0});await this.state.session.unpublish(this.state.mainStreamManager),await this.state.session.publish(t),this.setState({currentVideoDevice:s[0],mainStreamManager:t,publisher:t})}}}catch(i){console.error(i)}}render(){const e=this.state.mySessionId,s=this.state.myUserName;return Object(h.jsxs)(\"div\",{className:\"container\",children:[void 0===this.state.session?Object(h.jsxs)(\"div\",{id:\"join\",children:[Object(h.jsx)(\"div\",{id:\"img-div\",children:Object(h.jsx)(\"img\",{src:\"resources/images/openvidu_grey_bg_transp_cropped.png\",alt:\"OpenVidu logo\"})}),Object(h.jsxs)(\"div\",{id:\"join-dialog\",className:\"jumbotron vertical-center\",children:[Object(h.jsx)(\"h1\",{children:\" Join a video session \"}),Object(h.jsxs)(\"form\",{className:\"form-group\",onSubmit:this.joinSession,children:[Object(h.jsxs)(\"p\",{children:[Object(h.jsx)(\"label\",{children:\"Participant: \"}),Object(h.jsx)(\"input\",{className:\"form-control\",type:\"text\",id:\"userName\",value:s,onChange:this.handleChangeUserName,required:!0})]}),Object(h.jsxs)(\"p\",{children:[Object(h.jsx)(\"label\",{children:\" Session: \"}),Object(h.jsx)(\"input\",{className:\"form-control\",type:\"text\",id:\"sessionId\",value:e,onChange:this.handleChangeSessionId,required:!0})]}),Object(h.jsx)(\"p\",{className:\"text-center\",children:Object(h.jsx)(\"input\",{className:\"btn btn-lg btn-success\",name:\"commit\",type:\"submit\",value:\"JOIN\"})})]})]})]}):null,void 0!==this.state.session?Object(h.jsxs)(\"div\",{id:\"session\",children:[Object(h.jsxs)(\"div\",{id:\"session-header\",children:[Object(h.jsx)(\"h1\",{id:\"session-title\",children:e}),Object(h.jsx)(\"input\",{className:\"btn btn-large btn-danger\",type:\"button\",id:\"buttonLeaveSession\",onClick:this.leaveSession,value:\"Leave session\"}),Object(h.jsx)(\"input\",{className:\"btn btn-large btn-success\",type:\"button\",id:\"buttonSwitchCamera\",onClick:this.switchCamera,value:\"Switch Camera\"})]}),void 0!==this.state.mainStreamManager?Object(h.jsx)(\"div\",{id:\"main-video\",className:\"col-md-6\",children:Object(h.jsx)(m,{streamManager:this.state.mainStreamManager})}):null,Object(h.jsxs)(\"div\",{id:\"video-container\",className:\"col-md-6\",children:[void 0!==this.state.publisher?Object(h.jsx)(\"div\",{className:\"stream-container col-md-6 col-xs-6\",onClick:()=>this.handleMainVideoStream(this.state.publisher),children:Object(h.jsx)(m,{streamManager:this.state.publisher})}):null,this.state.subscribers.map(((e,s)=>Object(h.jsxs)(\"div\",{className:\"stream-container col-md-6 col-xs-6\",onClick:()=>this.handleMainVideoStream(e),children:[Object(h.jsx)(\"span\",{children:e.id}),Object(h.jsx)(m,{streamManager:e})]},e.id)))]})]}):null]})}async getToken(){const e=await this.createSession(this.state.mySessionId);return await this.createToken(e)}async createSession(e){const s=await d.a.post(\"openvidu/api/sessions\",{customSessionId:e},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Basic T1BFTlZJRFVBUFA6c3NhZnk=\"}});return console.log(e),console.log(s.data),s.data}async createToken(e){console.log(e);const s=await d.a.post(\"openvidu/api/sessions/\"+e.sessionId+\"/connection\",{},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Basic T1BFTlZJRFVBUFA6c3NhZnk=\"}});return console.log(s.data),s.data.token}}var b=u;const v=Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const s=e.installing;s.onstatechange=()=>{\"installed\"===s.state&&(navigator.serviceWorker.controller?console.log(\"New content is available; please refresh.\"):console.log(\"Content is cached for offline use.\"))}}})).catch((e=>{console.error(\"Error during service worker registration:\",e)}))}o.a.render(Object(h.jsx)(b,{}),document.getElementById(\"root\")),function(){if(\"serviceWorker\"in navigator){if(new URL(\"\",window.location).origin!==window.location.origin)return;window.addEventListener(\"load\",(()=>{const e=\"\".concat(\"\",\"/service-worker.js\");v?(!function(e){fetch(e).then((s=>{404===s.status||-1===s.headers.get(\"content-type\").indexOf(\"javascript\")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):p(e)})).catch((()=>{console.log(\"No internet connection found. App is running in offline mode.\")}))}(e),navigator.serviceWorker.ready.then((()=>{console.log(\"This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ\")}))):p(e)}))}}()},59:function(e,s,t){}},[[114,1,2]]]);","name":"static/js/main.51b26eee.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","lib","axios","axios_default","jsx_runtime","OvVideo_OpenViduVideoComponent","constructor","props","super","videoRef","a","createRef","componentDidUpdate","streamManager","addVideoElement","current","componentDidMount","render","Object","autoPlay","ref","UserVideoComponent_UserVideoComponent","getNicknameTag","JSON","parse","stream","connection","data","clientData","children","undefined","className","App_App","state","mySessionId","myUserName","Math","floor","random","session","mainStreamManager","publisher","subscribers","joinSession","bind","leaveSession","switchCamera","handleChangeSessionId","handleChangeUserName","handleMainVideoStream","onbeforeunload","window","addEventListener","componentWillUnmount","removeEventListener","event","e","setState","target","value","deleteSubscriber","index","indexOf","splice","OV","initSession","mySession","on","subscriber","subscribe","exception","console","warn","getToken","then","token","connect","async","initPublisherAsync","audioSource","videoSource","publishAudio","publishVideo","resolution","frameRate","insertMode","mirror","publish","videoDevices","getDevices","filter","device","kind","currentVideoDeviceId","getMediaStream","getVideoTracks","getSettings","deviceId","currentVideoDevice","find","catch","error","log","code","message","disconnect","length","newVideoDevice","newPublisher","initPublisher","unpublish","id","src","alt","onSubmit","type","onChange","required","name","onClick","map","sub","i","sessionId","createSession","createToken","response","post","customSessionId","headers","Authorization","src_App_0","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","document","getElementById","URL","origin","concat","fetch","status","get","ready","unregister","reload","checkValidServiceWorker"],"sources":["static/js/main.51b26eee.chunk.js"],"mappings":"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","ignoreList":[]},"input":"(this[\"webpackJsonpopenvidu-react\"] = this[\"webpackJsonpopenvidu-react\"] || []).push([[0],{\n\n/***/ 111:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 113:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 114:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(4);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(53);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(59);\n\n// EXTERNAL MODULE: ./node_modules/openvidu-browser/lib/index.js\nvar lib = __webpack_require__(54);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(23);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./src/App.css\nvar src_App = __webpack_require__(111);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/OvVideo.js\nclass OvVideo_OpenViduVideoComponent extends react[\"Component\"]{constructor(props){super(props);this.videoRef=/*#__PURE__*/react_default.a.createRef();}componentDidUpdate(props){if(props&&!!this.videoRef){this.props.streamManager.addVideoElement(this.videoRef.current);}}componentDidMount(){if(this.props&&!!this.videoRef){this.props.streamManager.addVideoElement(this.videoRef.current);}}render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{autoPlay:true,ref:this.videoRef});}}\n// EXTERNAL MODULE: ./src/UserVideo.css\nvar UserVideo = __webpack_require__(113);\n\n// CONCATENATED MODULE: ./src/UserVideoComponent.js\nclass UserVideoComponent_UserVideoComponent extends react[\"Component\"]{getNicknameTag(){// Gets the nickName of the user\nreturn JSON.parse(this.props.streamManager.stream.connection.data).clientData;}render(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:this.props.streamManager!==undefined?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"streamcomponent\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(OvVideo_OpenViduVideoComponent,{streamManager:this.props.streamManager}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:this.getNicknameTag()})})]}):null});}}\n// CONCATENATED MODULE: ./src/App.js\n// const APPLICATION_SERVER_URL = process.env.NODE_ENV === 'production' ? '' : 'https://demos.openvidu.io/';\nconst APPLICATION_SERVER_URL= true?'':undefined;class App_App extends react[\"Component\"]{constructor(props){super(props);// These properties are in the state's component in order to re-render the HTML whenever their values change\nthis.state={mySessionId:'SessionA',myUserName:'Participant'+Math.floor(Math.random()*100),session:undefined,mainStreamManager:undefined,// Main video of the page. Will be the 'publisher' or one of the 'subscribers'\npublisher:undefined,subscribers:[]};this.joinSession=this.joinSession.bind(this);this.leaveSession=this.leaveSession.bind(this);this.switchCamera=this.switchCamera.bind(this);this.handleChangeSessionId=this.handleChangeSessionId.bind(this);this.handleChangeUserName=this.handleChangeUserName.bind(this);this.handleMainVideoStream=this.handleMainVideoStream.bind(this);this.onbeforeunload=this.onbeforeunload.bind(this);}componentDidMount(){window.addEventListener('beforeunload',this.onbeforeunload);}componentWillUnmount(){window.removeEventListener('beforeunload',this.onbeforeunload);}onbeforeunload(event){this.leaveSession();}handleChangeSessionId(e){this.setState({mySessionId:e.target.value});}handleChangeUserName(e){this.setState({myUserName:e.target.value});}handleMainVideoStream(stream){if(this.state.mainStreamManager!==stream){this.setState({mainStreamManager:stream});}}deleteSubscriber(streamManager){let subscribers=this.state.subscribers;let index=subscribers.indexOf(streamManager,0);if(index>-1){subscribers.splice(index,1);this.setState({subscribers:subscribers});}}joinSession(){// --- 1) Get an OpenVidu object ---\nthis.OV=new lib[\"OpenVidu\"]();// --- 2) Init a session ---\nthis.setState({session:this.OV.initSession()},()=>{var mySession=this.state.session;// --- 3) Specify the actions when events take place in the session ---\n// On every new Stream received...\nmySession.on('streamCreated',event=>{// Subscribe to the Stream to receive it. Second parameter is undefined\n// so OpenVidu doesn't create an HTML video by its own\nvar subscriber=mySession.subscribe(event.stream,undefined);var subscribers=this.state.subscribers;subscribers.push(subscriber);// Update the state with the new subscribers\nthis.setState({subscribers:subscribers});});// On every Stream destroyed...\nmySession.on('streamDestroyed',event=>{// Remove the stream from 'subscribers' array\nthis.deleteSubscriber(event.stream.streamManager);});// On every asynchronous exception...\nmySession.on('exception',exception=>{console.warn(exception);});// --- 4) Connect to the session with a valid user token ---\n// Get a token from the OpenVidu deployment\nthis.getToken().then(token=>{// First param is the token got from the OpenVidu deployment. Second param can be retrieved by every user on event\n// 'streamCreated' (property Stream.connection.data), and will be appended to DOM as the user's nickname\nmySession.connect(token,{clientData:this.state.myUserName}).then(async()=>{// --- 5) Get your own camera stream ---\n// Init a publisher passing undefined as targetElement (we don't want OpenVidu to insert a video\n// element: we will manage it on our own) and with the desired properties\nlet publisher=await this.OV.initPublisherAsync(undefined,{audioSource:undefined,// The source of audio. If undefined default microphone\nvideoSource:undefined,// The source of video. If undefined default webcam\npublishAudio:true,// Whether you want to start publishing with your audio unmuted or not\npublishVideo:true,// Whether you want to start publishing with your video enabled or not\nresolution:'640x480',// The resolution of your video\nframeRate:30,// The frame rate of your video\ninsertMode:'APPEND',// How the video is inserted in the target element 'video-container'\nmirror:false// Whether to mirror your local video or not\n});// --- 6) Publish your stream ---\nmySession.publish(publisher);// Obtain the current video device in use\nvar devices=await this.OV.getDevices();var videoDevices=devices.filter(device=>device.kind==='videoinput');var currentVideoDeviceId=publisher.stream.getMediaStream().getVideoTracks()[0].getSettings().deviceId;var currentVideoDevice=videoDevices.find(device=>device.deviceId===currentVideoDeviceId);// Set the main video in the page to display our webcam and store our Publisher\nthis.setState({currentVideoDevice:currentVideoDevice,mainStreamManager:publisher,publisher:publisher});}).catch(error=>{console.log('There was an error connecting to the session:',error.code,error.message);});});});}leaveSession(){// --- 7) Leave the session by calling 'disconnect' method over the Session object ---\nconst mySession=this.state.session;if(mySession){mySession.disconnect();}// Empty all properties...\nthis.OV=null;this.setState({session:undefined,subscribers:[],mySessionId:'SessionA',myUserName:'Participant'+Math.floor(Math.random()*100),mainStreamManager:undefined,publisher:undefined});}async switchCamera(){try{const devices=await this.OV.getDevices();var videoDevices=devices.filter(device=>device.kind==='videoinput');if(videoDevices&&videoDevices.length>1){var newVideoDevice=videoDevices.filter(device=>device.deviceId!==this.state.currentVideoDevice.deviceId);if(newVideoDevice.length>0){// Creating a new publisher with specific videoSource\n// In mobile devices the default and first camera is the front one\nvar newPublisher=this.OV.initPublisher(undefined,{videoSource:newVideoDevice[0].deviceId,publishAudio:true,publishVideo:true,mirror:true});//newPublisher.once(\"accessAllowed\", () => {\nawait this.state.session.unpublish(this.state.mainStreamManager);await this.state.session.publish(newPublisher);this.setState({currentVideoDevice:newVideoDevice[0],mainStreamManager:newPublisher,publisher:newPublisher});}}}catch(e){console.error(e);}}render(){const mySessionId=this.state.mySessionId;const myUserName=this.state.myUserName;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[this.state.session===undefined?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"join\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"img-div\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"resources/images/openvidu_grey_bg_transp_cropped.png\",alt:\"OpenVidu logo\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"join-dialog\",className:\"jumbotron vertical-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\" Join a video session \"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"form-group\",onSubmit:this.joinSession,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\"Participant: \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control\",type:\"text\",id:\"userName\",value:myUserName,onChange:this.handleChangeUserName,required:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\" Session: \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control\",type:\"text\",id:\"sessionId\",value:mySessionId,onChange:this.handleChangeSessionId,required:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"text-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"btn btn-lg btn-success\",name:\"commit\",type:\"submit\",value:\"JOIN\"})})]})]})]}):null,this.state.session!==undefined?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"session\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"session-header\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{id:\"session-title\",children:mySessionId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"btn btn-large btn-danger\",type:\"button\",id:\"buttonLeaveSession\",onClick:this.leaveSession,value:\"Leave session\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"btn btn-large btn-success\",type:\"button\",id:\"buttonSwitchCamera\",onClick:this.switchCamera,value:\"Switch Camera\"})]}),this.state.mainStreamManager!==undefined?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"main-video\",className:\"col-md-6\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserVideoComponent_UserVideoComponent,{streamManager:this.state.mainStreamManager})}):null,/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{id:\"video-container\",className:\"col-md-6\",children:[this.state.publisher!==undefined?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"stream-container col-md-6 col-xs-6\",onClick:()=>this.handleMainVideoStream(this.state.publisher),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserVideoComponent_UserVideoComponent,{streamManager:this.state.publisher})}):null,this.state.subscribers.map((sub,i)=>/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"stream-container col-md-6 col-xs-6\",onClick:()=>this.handleMainVideoStream(sub),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:sub.id}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserVideoComponent_UserVideoComponent,{streamManager:sub})]},sub.id))]})]}):null]});}/**\n     * --------------------------------------------\n     * GETTING A TOKEN FROM YOUR APPLICATION SERVER\n     * --------------------------------------------\n     * The methods below request the creation of a Session and a Token to\n     * your application server. This keeps your OpenVidu deployment secure.\n     *\n     * In this sample code, there is no user control at all. Anybody could\n     * access your application server endpoints! In a real production\n     * environment, your application server must identify the user to allow\n     * access to the endpoints.\n     *\n     * Visit https://docs.openvidu.io/en/stable/application-server to learn\n     * more about the integration of OpenVidu in your application server.\n     */async getToken(){const sessionId=await this.createSession(this.state.mySessionId);return await this.createToken(sessionId);}async createSession(sessionId){const response=await axios_default.a.post(APPLICATION_SERVER_URL+'openvidu/api/sessions',{customSessionId:sessionId},{headers:{'Content-Type':'application/json','Authorization':'Basic T1BFTlZJRFVBUFA6c3NhZnk='}});console.log(sessionId);console.log(response.data);return response.data;// The sessionId\n}async createToken(sessionId){console.log(sessionId);const response=await axios_default.a.post(APPLICATION_SERVER_URL+'openvidu/api/sessions/'+sessionId.sessionId+'/connection',{},{headers:{'Content-Type':'application/json','Authorization':'Basic T1BFTlZJRFVBUFA6c3NhZnk='}});console.log(response.data);return response.data.token;// The token\n}}/* harmony default export */ var src_App_0 = (App_App);\n// CONCATENATED MODULE: ./src/registerServiceWorker.js\n// In production, we register a service worker to serve assets from local cache.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\nconst isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.1/8 is considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nconst publicUrl=new URL(\"\",window.location);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\nreturn;}window.addEventListener('load',()=>{const swUrl=\"\".concat(\"\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Lets check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(()=>{console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://goo.gl/SC7cgQ');});}else{// Is not local host. Just register service worker\nregisterValidSW(swUrl);}});}}function registerValidSW(swUrl){navigator.serviceWorker.register(swUrl).then(registration=>{registration.onupdatefound=()=>{const installingWorker=registration.installing;installingWorker.onstatechange=()=>{if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the old content will have been purged and\n// the fresh content will have been added to the cache.\n// It's the perfect time to display a \"New content is\n// available; please refresh.\" message in your web app.\nconsole.log('New content is available; please refresh.');}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');}}};};}).catch(error=>{console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl).then(response=>{// Ensure service worker exists, and that we really are getting a JS file.\nif(response.status===404||response.headers.get('content-type').indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(registration=>{registration.unregister().then(()=>{window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl);}}).catch(()=>{console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(registration=>{registration.unregister();});}}\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App_0,{}),document.getElementById('root'));register();\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ })\n\n},[[114,1,2]]]);","inputSourceMap":{"version":3,"sources":["/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/postcss-loader/src/index.js??postcss!/opt/openvidu/openvidu-tutorials/openvidu-react/src/App.css","/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/postcss-loader/src/index.js??postcss!/opt/openvidu/openvidu-tutorials/openvidu-react/src/UserVideo.css","/opt/openvidu/openvidu-tutorials/openvidu-react/src/OvVideo.js","/opt/openvidu/openvidu-tutorials/openvidu-react/src/UserVideoComponent.js","/opt/openvidu/openvidu-tutorials/openvidu-react/src/App.js","/opt/openvidu/openvidu-tutorials/openvidu-react/src/registerServiceWorker.js","/opt/openvidu/openvidu-tutorials/openvidu-react/src/index.js","/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/opt/openvidu/openvidu-tutorials/openvidu-react/node_modules/postcss-loader/src/index.js??postcss!/opt/openvidu/openvidu-tutorials/openvidu-react/src/index.css"],"names":["OpenViduVideoComponent","Component","constructor","props","videoRef","React","createRef","componentDidUpdate","streamManager","addVideoElement","current","componentDidMount","render","_jsx","autoPlay","ref","UserVideoComponent","getNicknameTag","JSON","parse","stream","connection","data","clientData","children","undefined","_jsxs","className","APPLICATION_SERVER_URL","process","App","state","mySessionId","myUserName","Math","floor","random","session","mainStreamManager","publisher","subscribers","joinSession","bind","leaveSession","switchCamera","handleChangeSessionId","handleChangeUserName","handleMainVideoStream","onbeforeunload","window","addEventListener","componentWillUnmount","removeEventListener","event","e","setState","target","value","deleteSubscriber","index","indexOf","splice","OV","OpenVidu","initSession","mySession","on","subscriber","subscribe","push","exception","console","warn","getToken","then","token","connect","initPublisherAsync","audioSource","videoSource","publishAudio","publishVideo","resolution","frameRate","insertMode","mirror","publish","devices","getDevices","videoDevices","filter","device","kind","currentVideoDeviceId","getMediaStream","getVideoTracks","getSettings","deviceId","currentVideoDevice","find","catch","error","log","code","message","disconnect","length","newVideoDevice","newPublisher","initPublisher","unpublish","id","src","alt","onSubmit","type","onChange","required","name","onClick","map","sub","i","sessionId","createSession","createToken","response","axios","post","customSessionId","headers","isLocalhost","Boolean","location","hostname","match","register","navigator","publicUrl","URL","origin","swUrl","concat","checkValidServiceWorker","serviceWorker","ready","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","controller","fetch","status","get","unregister","reload","ReactDOM","document","getElementById","registerServiceWorker"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React, { Component } from 'react';\n\nexport default class OpenViduVideoComponent extends Component {\n\n    constructor(props) {\n        super(props);\n        this.videoRef = React.createRef();\n    }\n\n    componentDidUpdate(props) {\n        if (props && !!this.videoRef) {\n            this.props.streamManager.addVideoElement(this.videoRef.current);\n        }\n    }\n\n    componentDidMount() {\n        if (this.props && !!this.videoRef) {\n            this.props.streamManager.addVideoElement(this.videoRef.current);\n        }\n    }\n\n    render() {\n        return <video autoPlay={true} ref={this.videoRef} />;\n    }\n\n}\n","import React, { Component } from 'react';\nimport OpenViduVideoComponent from './OvVideo';\nimport './UserVideo.css';\n\nexport default class UserVideoComponent extends Component {\n\n    getNicknameTag() {\n        // Gets the nickName of the user\n        return JSON.parse(this.props.streamManager.stream.connection.data).clientData;\n    }\n\n    render() {\n        return (\n            <div>\n                {this.props.streamManager !== undefined ? (\n                    <div className=\"streamcomponent\">\n                        <OpenViduVideoComponent streamManager={this.props.streamManager} />\n                        <div><p>{this.getNicknameTag()}</p></div>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n","import { OpenVidu } from 'openvidu-browser';\n\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport './App.css';\nimport UserVideoComponent from './UserVideoComponent';\n\n// const APPLICATION_SERVER_URL = process.env.NODE_ENV === 'production' ? '' : 'https://demos.openvidu.io/';\nconst APPLICATION_SERVER_URL = process.env.NODE_ENV === 'production' ? '' : 'https://b301.xyz/';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        // These properties are in the state's component in order to re-render the HTML whenever their values change\n        this.state = {\n            mySessionId: 'SessionA',\n            myUserName: 'Participant' + Math.floor(Math.random() * 100),\n            session: undefined,\n            mainStreamManager: undefined,  // Main video of the page. Will be the 'publisher' or one of the 'subscribers'\n            publisher: undefined,\n            subscribers: [],\n        };\n\n        this.joinSession = this.joinSession.bind(this);\n        this.leaveSession = this.leaveSession.bind(this);\n        this.switchCamera = this.switchCamera.bind(this);\n        this.handleChangeSessionId = this.handleChangeSessionId.bind(this);\n        this.handleChangeUserName = this.handleChangeUserName.bind(this);\n        this.handleMainVideoStream = this.handleMainVideoStream.bind(this);\n        this.onbeforeunload = this.onbeforeunload.bind(this);\n    }\n\n    componentDidMount() {\n        window.addEventListener('beforeunload', this.onbeforeunload);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('beforeunload', this.onbeforeunload);\n    }\n\n    onbeforeunload(event) {\n        this.leaveSession();\n    }\n\n    handleChangeSessionId(e) {\n        this.setState({\n            mySessionId: e.target.value,\n        });\n    }\n\n    handleChangeUserName(e) {\n        this.setState({\n            myUserName: e.target.value,\n        });\n    }\n\n    handleMainVideoStream(stream) {\n        if (this.state.mainStreamManager !== stream) {\n            this.setState({\n                mainStreamManager: stream\n            });\n        }\n    }\n\n    deleteSubscriber(streamManager) {\n        let subscribers = this.state.subscribers;\n        let index = subscribers.indexOf(streamManager, 0);\n        if (index > -1) {\n            subscribers.splice(index, 1);\n            this.setState({\n                subscribers: subscribers,\n            });\n        }\n    }\n\n    joinSession() {\n        // --- 1) Get an OpenVidu object ---\n\n        this.OV = new OpenVidu();\n\n        // --- 2) Init a session ---\n\n        this.setState(\n            {\n                session: this.OV.initSession(),\n            },\n            () => {\n                var mySession = this.state.session;\n\n                // --- 3) Specify the actions when events take place in the session ---\n\n                // On every new Stream received...\n                mySession.on('streamCreated', (event) => {\n                    // Subscribe to the Stream to receive it. Second parameter is undefined\n                    // so OpenVidu doesn't create an HTML video by its own\n                    var subscriber = mySession.subscribe(event.stream, undefined);\n                    var subscribers = this.state.subscribers;\n                    subscribers.push(subscriber);\n\n                    // Update the state with the new subscribers\n                    this.setState({\n                        subscribers: subscribers,\n                    });\n                });\n\n                // On every Stream destroyed...\n                mySession.on('streamDestroyed', (event) => {\n\n                    // Remove the stream from 'subscribers' array\n                    this.deleteSubscriber(event.stream.streamManager);\n                });\n\n                // On every asynchronous exception...\n                mySession.on('exception', (exception) => {\n                    console.warn(exception);\n                });\n\n                // --- 4) Connect to the session with a valid user token ---\n\n                // Get a token from the OpenVidu deployment\n                this.getToken().then((token) => {\n                    // First param is the token got from the OpenVidu deployment. Second param can be retrieved by every user on event\n                    // 'streamCreated' (property Stream.connection.data), and will be appended to DOM as the user's nickname\n                    mySession.connect(token, { clientData: this.state.myUserName })\n                        .then(async () => {\n\n                            // --- 5) Get your own camera stream ---\n\n                            // Init a publisher passing undefined as targetElement (we don't want OpenVidu to insert a video\n                            // element: we will manage it on our own) and with the desired properties\n                            let publisher = await this.OV.initPublisherAsync(undefined, {\n                                audioSource: undefined, // The source of audio. If undefined default microphone\n                                videoSource: undefined, // The source of video. If undefined default webcam\n                                publishAudio: true, // Whether you want to start publishing with your audio unmuted or not\n                                publishVideo: true, // Whether you want to start publishing with your video enabled or not\n                                resolution: '640x480', // The resolution of your video\n                                frameRate: 30, // The frame rate of your video\n                                insertMode: 'APPEND', // How the video is inserted in the target element 'video-container'\n                                mirror: false, // Whether to mirror your local video or not\n                            });\n\n                            // --- 6) Publish your stream ---\n\n                            mySession.publish(publisher);\n\n                            // Obtain the current video device in use\n                            var devices = await this.OV.getDevices();\n                            var videoDevices = devices.filter(device => device.kind === 'videoinput');\n                            var currentVideoDeviceId = publisher.stream.getMediaStream().getVideoTracks()[0].getSettings().deviceId;\n                            var currentVideoDevice = videoDevices.find(device => device.deviceId === currentVideoDeviceId);\n\n                            // Set the main video in the page to display our webcam and store our Publisher\n                            this.setState({\n                                currentVideoDevice: currentVideoDevice,\n                                mainStreamManager: publisher,\n                                publisher: publisher,\n                            });\n                        })\n                        .catch((error) => {\n                            console.log('There was an error connecting to the session:', error.code, error.message);\n                        });\n                });\n            },\n        );\n    }\n\n    leaveSession() {\n\n        // --- 7) Leave the session by calling 'disconnect' method over the Session object ---\n\n        const mySession = this.state.session;\n\n        if (mySession) {\n            mySession.disconnect();\n        }\n\n        // Empty all properties...\n        this.OV = null;\n        this.setState({\n            session: undefined,\n            subscribers: [],\n            mySessionId: 'SessionA',\n            myUserName: 'Participant' + Math.floor(Math.random() * 100),\n            mainStreamManager: undefined,\n            publisher: undefined\n        });\n    }\n\n    async switchCamera() {\n        try {\n            const devices = await this.OV.getDevices()\n            var videoDevices = devices.filter(device => device.kind === 'videoinput');\n\n            if (videoDevices && videoDevices.length > 1) {\n\n                var newVideoDevice = videoDevices.filter(device => device.deviceId !== this.state.currentVideoDevice.deviceId)\n\n                if (newVideoDevice.length > 0) {\n                    // Creating a new publisher with specific videoSource\n                    // In mobile devices the default and first camera is the front one\n                    var newPublisher = this.OV.initPublisher(undefined, {\n                        videoSource: newVideoDevice[0].deviceId,\n                        publishAudio: true,\n                        publishVideo: true,\n                        mirror: true\n                    });\n\n                    //newPublisher.once(\"accessAllowed\", () => {\n                    await this.state.session.unpublish(this.state.mainStreamManager)\n\n                    await this.state.session.publish(newPublisher)\n                    this.setState({\n                        currentVideoDevice: newVideoDevice[0],\n                        mainStreamManager: newPublisher,\n                        publisher: newPublisher,\n                    });\n                }\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    render() {\n        const mySessionId = this.state.mySessionId;\n        const myUserName = this.state.myUserName;\n\n        return (\n            <div className=\"container\">\n                {this.state.session === undefined ? (\n                    <div id=\"join\">\n                        <div id=\"img-div\">\n                            <img src=\"resources/images/openvidu_grey_bg_transp_cropped.png\" alt=\"OpenVidu logo\" />\n                        </div>\n                        <div id=\"join-dialog\" className=\"jumbotron vertical-center\">\n                            <h1> Join a video session </h1>\n                            <form className=\"form-group\" onSubmit={this.joinSession}>\n                                <p>\n                                    <label>Participant: </label>\n                                    <input\n                                        className=\"form-control\"\n                                        type=\"text\"\n                                        id=\"userName\"\n                                        value={myUserName}\n                                        onChange={this.handleChangeUserName}\n                                        required\n                                    />\n                                </p>\n                                <p>\n                                    <label> Session: </label>\n                                    <input\n                                        className=\"form-control\"\n                                        type=\"text\"\n                                        id=\"sessionId\"\n                                        value={mySessionId}\n                                        onChange={this.handleChangeSessionId}\n                                        required\n                                    />\n                                </p>\n                                <p className=\"text-center\">\n                                    <input className=\"btn btn-lg btn-success\" name=\"commit\" type=\"submit\" value=\"JOIN\" />\n                                </p>\n                            </form>\n                        </div>\n                    </div>\n                ) : null}\n\n                {this.state.session !== undefined ? (\n                    <div id=\"session\">\n                        <div id=\"session-header\">\n                            <h1 id=\"session-title\">{mySessionId}</h1>\n                            <input\n                                className=\"btn btn-large btn-danger\"\n                                type=\"button\"\n                                id=\"buttonLeaveSession\"\n                                onClick={this.leaveSession}\n                                value=\"Leave session\"\n                            />\n                            <input\n                                className=\"btn btn-large btn-success\"\n                                type=\"button\"\n                                id=\"buttonSwitchCamera\"\n                                onClick={this.switchCamera}\n                                value=\"Switch Camera\"\n                            />\n                        </div>\n\n                        {this.state.mainStreamManager !== undefined ? (\n                            <div id=\"main-video\" className=\"col-md-6\">\n                                <UserVideoComponent streamManager={this.state.mainStreamManager} />\n\n                            </div>\n                        ) : null}\n                        <div id=\"video-container\" className=\"col-md-6\">\n                            {this.state.publisher !== undefined ? (\n                                <div className=\"stream-container col-md-6 col-xs-6\" onClick={() => this.handleMainVideoStream(this.state.publisher)}>\n                                    <UserVideoComponent\n                                        streamManager={this.state.publisher} />\n                                </div>\n                            ) : null}\n                            {this.state.subscribers.map((sub, i) => (\n                                <div key={sub.id} className=\"stream-container col-md-6 col-xs-6\" onClick={() => this.handleMainVideoStream(sub)}>\n                                    <span>{sub.id}</span>\n                                    <UserVideoComponent streamManager={sub} />\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n\n\n    /**\n     * --------------------------------------------\n     * GETTING A TOKEN FROM YOUR APPLICATION SERVER\n     * --------------------------------------------\n     * The methods below request the creation of a Session and a Token to\n     * your application server. This keeps your OpenVidu deployment secure.\n     *\n     * In this sample code, there is no user control at all. Anybody could\n     * access your application server endpoints! In a real production\n     * environment, your application server must identify the user to allow\n     * access to the endpoints.\n     *\n     * Visit https://docs.openvidu.io/en/stable/application-server to learn\n     * more about the integration of OpenVidu in your application server.\n     */\n    async getToken() {\n        const sessionId = await this.createSession(this.state.mySessionId);\n        return await this.createToken(sessionId);\n    }\n\n    async createSession(sessionId) {\n        const response = await axios.post(APPLICATION_SERVER_URL + 'openvidu/api/sessions', { customSessionId: sessionId }, {\n            headers: { 'Content-Type': 'application/json', 'Authorization': 'Basic T1BFTlZJRFVBUFA6c3NhZnk=',},\n        });\n\tconsole.log(sessionId);\n\tconsole.log(response.data);\n        return response.data; // The sessionId\n    }\n\n    async createToken(sessionId) {\n\tconsole.log(sessionId);\n        const response = await axios.post(APPLICATION_SERVER_URL + 'openvidu/api/sessions/' + sessionId.sessionId + '/connection', {}, {\n            headers: { 'Content-Type': 'application/json', 'Authorization': 'Basic T1BFTlZJRFVBUFA6c3NhZnk=', },\n        });\n\tconsole.log(response.data);\n        return response.data.token; // The token\n    }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","// extracted by mini-css-extract-plugin"]}}